## Tensorflow execution of Googlenet 
- Tensorflow implementation [Googlenet.py](https://git.uni-paderborn.de/cs-hit/pg-custonn2-2018/blob/tvm/OpenCL_Kernels/Testing_code/googlenet.py)(a python file) in this dir allows us to run any frozen pb file
- Make sure you have Tensorflow , scipy , opencv , numpy packages. 
- We can take advantage of this to run Googlent for verification of our kernel implementations
- To run the implementation until any given layer , just change `run_until` ex : `run_until = 'InceptionV1/InceptionV1/Mixed_4c/Branch_1/Conv2d_0a_1x1/Relu:0'`  
   Please refer to [TF Googlenet tensor names](https://git.uni-paderborn.de/cs-hit/pg-custonn2-2018/blob/tvm/OpenCL_Kernels/Testing_code/TF_Googlenet_Layers.txt) 
- The output will be stored in  the location specified in ` file_path_xxxx`. The outputs will be stored in two files to support two formats : NHWC and NCHW
- You can print out the contents of `Session_out` for any layer to see the output.
- The format used by TF is NHWC in this case. So modify your print statements appropriatley.
- Script works well until InceptionV1/InceptionV1/Mixed_5c/concat:0. After that , the remaining Ops` outputs can be easily generated by hand
- The results of all the major tensor operations are placed in [pc2-cc-user\custonn2\designs\Tensorflow_outputs](\\fs-cifs.uni-paderborn.de\upb\scratch\departments\pc2\groups\pc2-cc-user\custonn2\designs\Tensorflow_outputs)
- Googlenet kernel- softmax results are not placed.
- We can directly work with results of the last conv in our plugin 
- 


## Tensorflow execution of Resnet50
- Steps to grab output files is same as the steps given for Googlenet  
- Just change  `run_until = 'resnet_v2_50/block1/unit_1/bottleneck_v2/preact/Relu:0'
- Refer to : https://git.uni-paderborn.de/cs-hit/pg-custonn2-2018/blob/tvm/OpenCL_Kernels/Testing_code/TF_Resnet_Layers.txt for info about layers suppored by Resnet
- The results of all the major tensor operations are placed in [pc2-cc-user\custonn2\designs\Tensorflow_outputs](\\fs-cifs.uni-paderborn.de\upb\scratch\departments\pc2\groups\pc2-cc-user\custonn2\designs\Tensorflow_outputs)
- 

## Profile.sh
- Shell script to rename profile.mon file during executing on fpga
- Steps to execute profile.sh
  - `chmod u+x profile.sh` make file executable
  - `./profile.sh &` to run it in background and start executing make file for running plugin on fpga.



# Steps to compare Kernel outputs with Tensorflow Outputs.

### Filename - abserror.py

### Requirements

 - Python 3 or higher with NumPy 1.16


### Running the script.
 For running the script to compare the values, first you should edit the script with file paths and save the script.
 1. Go to line 11 and 13 update the `tf_path` and `tf_filename` the location to your tensorflow output file.
 2. Go to line 16 and 18 update the `kernel_path` and `kernel_filename` the location to your kernel output file.
2. Run the Python command
`python abs_error.py`

 
